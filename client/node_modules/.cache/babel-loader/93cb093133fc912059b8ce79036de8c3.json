{"ast":null,"code":"var _jsxFileName = \"/home/hmny/Projects/M-and-M/client/src/Creator/App.js\";\nimport React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Fab, Grid, Button, makeStyles } from '@material-ui/core';\nimport { Home as HomeIcon, ArrowBack as ArrowBackIcon } from '@material-ui/icons';\nimport { useSnackbar } from 'notistack';\nimport Preview from '../common/Preview';\nimport Inspector from './components/Inspector';\nimport SaveDialog from './components/SaveDialog';\nimport axios from '../common/shared';\nimport useTemplateStore from './stores/template';\nimport useStylesStore from './stores/styles';\nimport * as ROUTES from '../routes';\nconst useStyles = makeStyles(theme => ({\n  container: {\n    width: '100vw',\n    height: '100vh',\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  buttonsContainer: {\n    margin: theme.spacing(2),\n    top: theme.spacing(2),\n    left: theme.spacing(2),\n    display: 'flex',\n    flexDirection: 'row',\n    zIndex: 1\n  },\n  navButton: {\n    marginRight: theme.spacing(2)\n  },\n  grid: {\n    flexGrow: 1\n  },\n  previewPanel: {\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'space-evenly'\n  },\n  Inspector: {\n    paddingBottom: '10px'\n  }\n}));\n\nconst inlineStyles = (styles, components) => components.map(component => ({ ...component,\n  style: styles[component.styleId],\n  children: component.children && inlineStyles(styles, component.children)\n}));\n\nconst App = () => {\n  const classes = useStyles();\n  const history = useHistory();\n  const {\n    enqueueSnackbar\n  } = useSnackbar();\n  const [isSaving, setIsSaving] = useState(false);\n  const styles = useStylesStore(state => state.styles);\n  const components = useTemplateStore(state => state.components);\n\n  const saveTemplate = meta => {\n    setIsSaving(false);\n    const styledComponents = inlineStyles(styles, components);\n    axios // See common/shared.js (useAPI hook)\n    .post('templates', { ...meta,\n      components: styledComponents\n    }).then(value => {\n      console.log('saved template ', value);\n      enqueueSnackbar('Saved your template!', {\n        variant: 'success'\n      });\n    }).catch(err => {\n      console.error(err);\n      enqueueSnackbar('Something went wrong...', {\n        variant: 'error'\n      });\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.buttonsContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Fab, {\n    className: classes.navButton,\n    onClick: () => history.goBack(),\n    size: \"medium\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ArrowBackIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Fab, {\n    className: classes.navButton,\n    onClick: () => history.push(ROUTES.HOME),\n    size: \"medium\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(HomeIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    className: classes.grid,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Inspector, {\n    className: classes.Inspector,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    xs: 6,\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.previewPanel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Preview, {\n    components: components,\n    styles: styles,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    color: \"primary\",\n    variant: \"contained\",\n    className: classes.saveButton,\n    onClick: () => setIsSaving(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }, \"Save Template\"), /*#__PURE__*/React.createElement(SaveDialog, {\n    open: isSaving,\n    onCancel: () => {\n      setIsSaving(false);\n    },\n    onSave: saveTemplate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  })))));\n};\n\nexport default App;","map":{"version":3,"sources":["/home/hmny/Projects/M-and-M/client/src/Creator/App.js"],"names":["React","useState","useHistory","Fab","Grid","Button","makeStyles","Home","HomeIcon","ArrowBack","ArrowBackIcon","useSnackbar","Preview","Inspector","SaveDialog","axios","useTemplateStore","useStylesStore","ROUTES","useStyles","theme","container","width","height","display","flexDirection","buttonsContainer","margin","spacing","top","left","zIndex","navButton","marginRight","grid","flexGrow","previewPanel","alignItems","justifyContent","paddingBottom","inlineStyles","styles","components","map","component","style","styleId","children","App","classes","history","enqueueSnackbar","isSaving","setIsSaving","state","saveTemplate","meta","styledComponents","post","then","value","console","log","variant","catch","err","error","goBack","push","HOME","saveButton"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Fab, Grid, Button, makeStyles } from '@material-ui/core';\nimport { Home as HomeIcon, ArrowBack as ArrowBackIcon } from '@material-ui/icons';\nimport { useSnackbar } from 'notistack';\n\nimport Preview from '../common/Preview';\nimport Inspector from './components/Inspector';\nimport SaveDialog from './components/SaveDialog';\nimport axios from '../common/shared';\nimport useTemplateStore from './stores/template';\nimport useStylesStore from './stores/styles';\n\nimport * as ROUTES from '../routes';\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    width: '100vw',\n    height: '100vh',\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  buttonsContainer: {\n    margin: theme.spacing(2),\n    top: theme.spacing(2),\n    left: theme.spacing(2),\n    display: 'flex',\n    flexDirection: 'row',\n    zIndex: 1,\n  },\n  navButton: {\n    marginRight: theme.spacing(2),\n  },\n  grid: {\n    flexGrow: 1,\n  },\n  previewPanel: {\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'space-evenly',\n  },\n  Inspector: {\n    paddingBottom: '10px',\n  },\n}));\n\nconst inlineStyles = (styles, components) =>\n  components.map(component => ({\n    ...component,\n    style: styles[component.styleId],\n    children: component.children && inlineStyles(styles, component.children),\n  }));\n\nconst App = () => {\n  const classes = useStyles();\n  const history = useHistory();\n  const { enqueueSnackbar } = useSnackbar();\n  const [isSaving, setIsSaving] = useState(false);\n  const styles = useStylesStore(state => state.styles);\n  const components = useTemplateStore(state => state.components);\n  const saveTemplate = meta => {\n    setIsSaving(false);\n    const styledComponents = inlineStyles(styles, components);\n    axios // See common/shared.js (useAPI hook)\n      .post('templates', { ...meta, components: styledComponents })\n      .then(value => {\n        console.log('saved template ', value);\n        enqueueSnackbar('Saved your template!', { variant: 'success' });\n      })\n      .catch(err => {\n        console.error(err);\n        enqueueSnackbar('Something went wrong...', { variant: 'error' });\n      });\n  };\n\n  return (\n    <div className={classes.container}>\n      <div className={classes.buttonsContainer}>\n        <Fab className={classes.navButton} onClick={() => history.goBack()} size=\"medium\">\n          <ArrowBackIcon />\n        </Fab>\n        <Fab\n          className={classes.navButton}\n          onClick={() => history.push(ROUTES.HOME)}\n          size=\"medium\"\n        >\n          <HomeIcon />\n        </Fab>\n      </div>\n      <Grid container className={classes.grid}>\n        <Grid item xs={6}>\n          <Inspector className={classes.Inspector} />\n        </Grid>\n        <Grid xs={6} item>\n          <div className={classes.previewPanel}>\n            <Preview components={components} styles={styles} />\n            <Button\n              color=\"primary\"\n              variant=\"contained\"\n              className={classes.saveButton}\n              onClick={() => setIsSaving(true)}\n            >\n              Save Template\n            </Button>\n            <SaveDialog\n              open={isSaving}\n              onCancel={() => {\n                setIsSaving(false);\n              }}\n              onSave={saveTemplate}\n            />\n          </div>\n        </Grid>\n      </Grid>\n    </div>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}