{"ast":null,"code":"var _jsxFileName = \"/home/hmny/Projects/M-and-M/client/src/Evaluator/App.js\";\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Fab, makeStyles } from '@material-ui/core';\nimport { Home as HomeIcon, GetApp as GetAppIcon } from '@material-ui/icons';\nimport { useEvaluator } from './context/EvaluatorContext';\nimport { ActivePlayersList, ProgressGraph, WidgetArea } from './components/';\nimport * as ROUTES from '../routes';\nconst useStyles = makeStyles(theme => ({\n  container: {\n    position: 'relative',\n    width: '100vw',\n    height: '100vh'\n  },\n  main: {\n    height: '100vh',\n    display: 'flex',\n    '& .vis-network': {\n      outline: 'none'\n    }\n  },\n  buttonsContainer: {\n    position: 'absolute',\n    top: theme.spacing(2),\n    left: theme.spacing(30),\n    display: 'flex',\n    flexDirection: 'row',\n    zIndex: 1\n  },\n  navButton: {\n    marginRight: theme.spacing(2)\n  },\n  navIcon: {\n    marginRight: theme.spacing(1)\n  }\n}));\n\nconst triggerDownload = ({\n  name,\n  url\n}) => {\n  const link = document.createElement('a');\n  document.body.appendChild(link);\n  link.download = name;\n  link.href = url;\n  link.click();\n  document.body.removeChild(link);\n};\n\nconst App = () => {\n  const history = useHistory();\n  const classes = useStyles();\n  const {\n    playersLog\n  } = useEvaluator();\n\n  const downloadLogs = () => {\n    // Deep copy (does not keep the reference to the original object)\n    const logCopy = JSON.parse(JSON.stringify(playersLog));\n    const playerRanking = logCopy.sort((x, y) => y.score - x.score);\n    const teamRanking = logCopy // Get the team list with their respective team score\n    .reduce((list, {\n      team,\n      score,\n      name,\n      id\n    }) => {\n      // The current player has no team\n      if (team === '') return list;\n      const playerTeam = list.find(item => item.name === team);\n\n      if (playerTeam) {\n        playerTeam.score += score;\n        playerTeam.components.push(name || id);\n      } else list.push({\n        name: team,\n        score,\n        components: [name || id]\n      });\n\n      return list;\n    }, []) // Sort it by the score to get a ranking\n    .sort((x, y) => y.score - x.score);\n    const completeLog = {\n      playerRanking,\n      teamRanking\n    };\n    const exportURI = encodeURIComponent(JSON.stringify(completeLog));\n    const url = `data:text/json;charset=utf-8,${exportURI}`;\n    triggerDownload({\n      name: 'StoryMatchLog.json',\n      url\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.main,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ActivePlayersList, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.buttonsContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Fab, {\n    className: classes.navButton,\n    onClick: () => history.push(ROUTES.HOME),\n    variant: \"extended\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(HomeIcon, {\n    className: classes.navIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }), \"Home\"), /*#__PURE__*/React.createElement(Fab, {\n    className: classes.navButton,\n    onClick: downloadLogs,\n    variant: \"extended\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(GetAppIcon, {\n    className: classes.navIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  }), \"Download log\")), /*#__PURE__*/React.createElement(ProgressGraph, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(WidgetArea, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default App;\n/*\n  const playerSort = (x, y) => y.score - x.score;\n  const getTeamScore = teamName =>\n    playersLog.reduce(\n      (teamScore, { team, score }) => teamScore + (team === teamName ? score : 0),\n      0\n    );\n  const teamSort = (x, y) => getTeamScore(y.team) - getTeamScore(x.team);\n*/","map":{"version":3,"sources":["/home/hmny/Projects/M-and-M/client/src/Evaluator/App.js"],"names":["React","useHistory","Fab","makeStyles","Home","HomeIcon","GetApp","GetAppIcon","useEvaluator","ActivePlayersList","ProgressGraph","WidgetArea","ROUTES","useStyles","theme","container","position","width","height","main","display","outline","buttonsContainer","top","spacing","left","flexDirection","zIndex","navButton","marginRight","navIcon","triggerDownload","name","url","link","document","createElement","body","appendChild","download","href","click","removeChild","App","history","classes","playersLog","downloadLogs","logCopy","JSON","parse","stringify","playerRanking","sort","x","y","score","teamRanking","reduce","list","team","id","playerTeam","find","item","components","push","completeLog","exportURI","encodeURIComponent","HOME"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,GAAT,EAAcC,UAAd,QAAgC,mBAAhC;AACA,SAASC,IAAI,IAAIC,QAAjB,EAA2BC,MAAM,IAAIC,UAArC,QAAuD,oBAAvD;AAEA,SAASC,YAAT,QAA6B,4BAA7B;AACA,SAASC,iBAAT,EAA4BC,aAA5B,EAA2CC,UAA3C,QAA6D,eAA7D;AAEA,OAAO,KAAKC,MAAZ,MAAwB,WAAxB;AAEA,MAAMC,SAAS,GAAGV,UAAU,CAACW,KAAK,KAAK;AACrCC,EAAAA,SAAS,EAAE;AACTC,IAAAA,QAAQ,EAAE,UADD;AAETC,IAAAA,KAAK,EAAE,OAFE;AAGTC,IAAAA,MAAM,EAAE;AAHC,GAD0B;AAMrCC,EAAAA,IAAI,EAAE;AACJD,IAAAA,MAAM,EAAE,OADJ;AAEJE,IAAAA,OAAO,EAAE,MAFL;AAGJ,sBAAkB;AAChBC,MAAAA,OAAO,EAAE;AADO;AAHd,GAN+B;AAarCC,EAAAA,gBAAgB,EAAE;AAChBN,IAAAA,QAAQ,EAAE,UADM;AAEhBO,IAAAA,GAAG,EAAET,KAAK,CAACU,OAAN,CAAc,CAAd,CAFW;AAGhBC,IAAAA,IAAI,EAAEX,KAAK,CAACU,OAAN,CAAc,EAAd,CAHU;AAIhBJ,IAAAA,OAAO,EAAE,MAJO;AAKhBM,IAAAA,aAAa,EAAE,KALC;AAMhBC,IAAAA,MAAM,EAAE;AANQ,GAbmB;AAqBrCC,EAAAA,SAAS,EAAE;AACTC,IAAAA,WAAW,EAAEf,KAAK,CAACU,OAAN,CAAc,CAAd;AADJ,GArB0B;AAwBrCM,EAAAA,OAAO,EAAE;AACPD,IAAAA,WAAW,EAAEf,KAAK,CAACU,OAAN,CAAc,CAAd;AADN;AAxB4B,CAAL,CAAN,CAA5B;;AA6BA,MAAMO,eAAe,GAAG,CAAC;AAAEC,EAAAA,IAAF;AAAQC,EAAAA;AAAR,CAAD,KAAmB;AACzC,QAAMC,IAAI,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAb;AACAD,EAAAA,QAAQ,CAACE,IAAT,CAAcC,WAAd,CAA0BJ,IAA1B;AACAA,EAAAA,IAAI,CAACK,QAAL,GAAgBP,IAAhB;AACAE,EAAAA,IAAI,CAACM,IAAL,GAAYP,GAAZ;AACAC,EAAAA,IAAI,CAACO,KAAL;AACAN,EAAAA,QAAQ,CAACE,IAAT,CAAcK,WAAd,CAA0BR,IAA1B;AACD,CAPD;;AASA,MAAMS,GAAG,GAAG,MAAM;AAChB,QAAMC,OAAO,GAAG3C,UAAU,EAA1B;AACA,QAAM4C,OAAO,GAAGhC,SAAS,EAAzB;AACA,QAAM;AAAEiC,IAAAA;AAAF,MAAiBtC,YAAY,EAAnC;;AAEA,QAAMuC,YAAY,GAAG,MAAM;AACzB;AACA,UAAMC,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeL,UAAf,CAAX,CAAhB;AACA,UAAMM,aAAa,GAAGJ,OAAO,CAACK,IAAR,CAAa,CAACC,CAAD,EAAIC,CAAJ,KAAUA,CAAC,CAACC,KAAF,GAAUF,CAAC,CAACE,KAAnC,CAAtB;AACA,UAAMC,WAAW,GAAGT,OAAO,CACzB;AADyB,KAExBU,MAFiB,CAEV,CAACC,IAAD,EAAO;AAAEC,MAAAA,IAAF;AAAQJ,MAAAA,KAAR;AAAexB,MAAAA,IAAf;AAAqB6B,MAAAA;AAArB,KAAP,KAAqC;AAC3C;AACA,UAAID,IAAI,KAAK,EAAb,EAAiB,OAAOD,IAAP;AACjB,YAAMG,UAAU,GAAGH,IAAI,CAACI,IAAL,CAAUC,IAAI,IAAIA,IAAI,CAAChC,IAAL,KAAc4B,IAAhC,CAAnB;;AACA,UAAIE,UAAJ,EAAgB;AACdA,QAAAA,UAAU,CAACN,KAAX,IAAoBA,KAApB;AACAM,QAAAA,UAAU,CAACG,UAAX,CAAsBC,IAAtB,CAA2BlC,IAAI,IAAI6B,EAAnC;AACD,OAHD,MAGOF,IAAI,CAACO,IAAL,CAAU;AAAElC,QAAAA,IAAI,EAAE4B,IAAR;AAAcJ,QAAAA,KAAd;AAAqBS,QAAAA,UAAU,EAAE,CAACjC,IAAI,IAAI6B,EAAT;AAAjC,OAAV;;AACP,aAAOF,IAAP;AACD,KAXiB,EAWf,EAXe,EAYlB;AAZkB,KAajBN,IAbiB,CAaZ,CAACC,CAAD,EAAIC,CAAJ,KAAUA,CAAC,CAACC,KAAF,GAAUF,CAAC,CAACE,KAbV,CAApB;AAeA,UAAMW,WAAW,GAAG;AAAEf,MAAAA,aAAF;AAAiBK,MAAAA;AAAjB,KAApB;AACA,UAAMW,SAAS,GAAGC,kBAAkB,CAACpB,IAAI,CAACE,SAAL,CAAegB,WAAf,CAAD,CAApC;AACA,UAAMlC,GAAG,GAAI,gCAA+BmC,SAAU,EAAtD;AACArC,IAAAA,eAAe,CAAC;AAAEC,MAAAA,IAAI,EAAE,oBAAR;AAA8BC,MAAAA;AAA9B,KAAD,CAAf;AACD,GAvBD;;AAyBA,sBACE;AAAK,IAAA,SAAS,EAAEY,OAAO,CAAC9B,SAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAE8B,OAAO,CAAC1B,IAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,iBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AAAK,IAAA,SAAS,EAAE0B,OAAO,CAACvB,gBAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,GAAD;AACE,IAAA,SAAS,EAAEuB,OAAO,CAACjB,SADrB;AAEE,IAAA,OAAO,EAAE,MAAMgB,OAAO,CAACsB,IAAR,CAAatD,MAAM,CAAC0D,IAApB,CAFjB;AAGE,IAAA,OAAO,EAAC,UAHV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAKE,oBAAC,QAAD;AAAU,IAAA,SAAS,EAAEzB,OAAO,CAACf,OAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALF,SADF,eASE,oBAAC,GAAD;AAAK,IAAA,SAAS,EAAEe,OAAO,CAACjB,SAAxB;AAAmC,IAAA,OAAO,EAAEmB,YAA5C;AAA0D,IAAA,OAAO,EAAC,UAAlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,UAAD;AAAY,IAAA,SAAS,EAAEF,OAAO,CAACf,OAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,iBATF,CAFF,eAgBE,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAhBF,CADF,eAmBE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAnBF,CADF;AAuBD,CArDD;;AAuDA,eAAea,GAAf;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Fab, makeStyles } from '@material-ui/core';\nimport { Home as HomeIcon, GetApp as GetAppIcon } from '@material-ui/icons';\n\nimport { useEvaluator } from './context/EvaluatorContext';\nimport { ActivePlayersList, ProgressGraph, WidgetArea } from './components/';\n\nimport * as ROUTES from '../routes';\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    position: 'relative',\n    width: '100vw',\n    height: '100vh',\n  },\n  main: {\n    height: '100vh',\n    display: 'flex',\n    '& .vis-network': {\n      outline: 'none',\n    },\n  },\n  buttonsContainer: {\n    position: 'absolute',\n    top: theme.spacing(2),\n    left: theme.spacing(30),\n    display: 'flex',\n    flexDirection: 'row',\n    zIndex: 1,\n  },\n  navButton: {\n    marginRight: theme.spacing(2),\n  },\n  navIcon: {\n    marginRight: theme.spacing(1),\n  },\n}));\n\nconst triggerDownload = ({ name, url }) => {\n  const link = document.createElement('a');\n  document.body.appendChild(link);\n  link.download = name;\n  link.href = url;\n  link.click();\n  document.body.removeChild(link);\n};\n\nconst App = () => {\n  const history = useHistory();\n  const classes = useStyles();\n  const { playersLog } = useEvaluator();\n\n  const downloadLogs = () => {\n    // Deep copy (does not keep the reference to the original object)\n    const logCopy = JSON.parse(JSON.stringify(playersLog));\n    const playerRanking = logCopy.sort((x, y) => y.score - x.score);\n    const teamRanking = logCopy\n      // Get the team list with their respective team score\n      .reduce((list, { team, score, name, id }) => {\n        // The current player has no team\n        if (team === '') return list;\n        const playerTeam = list.find(item => item.name === team);\n        if (playerTeam) {\n          playerTeam.score += score;\n          playerTeam.components.push(name || id);\n        } else list.push({ name: team, score, components: [name || id] });\n        return list;\n      }, [])\n      // Sort it by the score to get a ranking\n      .sort((x, y) => y.score - x.score);\n\n    const completeLog = { playerRanking, teamRanking };\n    const exportURI = encodeURIComponent(JSON.stringify(completeLog));\n    const url = `data:text/json;charset=utf-8,${exportURI}`;\n    triggerDownload({ name: 'StoryMatchLog.json', url });\n  };\n\n  return (\n    <div className={classes.container}>\n      <div className={classes.main}>\n        <ActivePlayersList />\n        <div className={classes.buttonsContainer}>\n          <Fab\n            className={classes.navButton}\n            onClick={() => history.push(ROUTES.HOME)}\n            variant=\"extended\"\n          >\n            <HomeIcon className={classes.navIcon} />\n            Home\n          </Fab>\n          <Fab className={classes.navButton} onClick={downloadLogs} variant=\"extended\">\n            <GetAppIcon className={classes.navIcon} />\n            Download log\n          </Fab>\n        </div>\n        <ProgressGraph />\n      </div>\n      <WidgetArea />\n    </div>\n  );\n};\n\nexport default App;\n\n/*\n  const playerSort = (x, y) => y.score - x.score;\n  const getTeamScore = teamName =>\n    playersLog.reduce(\n      (teamScore, { team, score }) => teamScore + (team === teamName ? score : 0),\n      0\n    );\n  const teamSort = (x, y) => getTeamScore(y.team) - getTeamScore(x.team);\n*/\n"]},"metadata":{},"sourceType":"module"}